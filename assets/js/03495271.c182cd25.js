"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8019],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>f});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(r),m=i,f=c["".concat(s,".").concat(m)]||c[m]||u[m]||a;return r?n.createElement(f,o(o({ref:t},d),{},{components:r})):n.createElement(f,o({ref:t},d))}));function f(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},7385:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(7294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}const a=e=>{let{title:t,titleId:r,...a}=e;return n.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16","aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,n.createElement("path",{style:{stroke:"none",fillRule:"nonzero",fill:"#9e80b5",fillOpacity:1},d:"M3 14a.947.947 0 0 1-.7-.3.947.947 0 0 1-.3-.7V3c0-.266.098-.5.3-.7.2-.202.434-.3.7-.3h4.652v1H3v10h10V8.348h1V13c0 .266-.098.5-.3.7-.2.202-.434.3-.7.3Zm3.367-3.652-.699-.715L12.301 3H8.652V2H14v5.348h-1V3.715Zm0 0"}))}},8599:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=r(7462),i=(r(7294),r(3905)),a=r(7385);const o={},l="Configuring Testify for Android Library Projects",s={unversionedId:"recipes/library-projects",id:"recipes/library-projects",title:"Configuring Testify for Android Library Projects",description:"An Android library  is structurally the same as an Android app module. It includes everything needed to build an app, including source code, resource files, and an Android manifest. So, it is often necessary to want to use screenshot testing with your library.",source:"@site/docs/recipes/21-library-projects.md",sourceDirName:"recipes",slug:"/recipes/library-projects",permalink:"/android-testify/docs/recipes/library-projects",draft:!1,editUrl:"https://github.com/ndtp/android-testify/tree/issue-12/docusaurus/docs/docs/recipes/21-library-projects.md",tags:[],version:"current",sidebarPosition:21,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Configuring Testify to run on Gradle managed device",permalink:"/android-testify/docs/recipes/gmd"},next:{title:"Change Log",permalink:"/android-testify/docs/changelog"}},p={},d=[{value:"Testify Configuration Values:",id:"testify-configuration-values",level:3},{value:"Sample",id:"sample",level:2},{value:"More Information",id:"more-information",level:2}],c={toc:d},u="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(u,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"configuring-testify-for-android-library-projects"},"Configuring Testify for Android Library Projects"),(0,i.kt)("p",null,"An ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/studio/projects/android-library"},"Android library ",(0,i.kt)(a.Z,{mdxType:"OpenNew"}))," is structurally the same as an Android app module. It includes everything needed to build an app, including source code, resource files, and an Android manifest. So, it is often necessary to want to use screenshot testing with your library. "),(0,i.kt)("p",null,"However, instead of compiling into an APK that runs on a device, an Android library compiles into an Android Archive (AAR) file that you can use as a dependency for an Android app module. This means that Testify requires special configuration. The Testify Gradle Plugin is able to infer most configuration parameters for App modules, but for a Library module, some values must be specified in the ",(0,i.kt)("inlineCode",{parentName:"p"},"build.gradle")," file."),(0,i.kt)("p",null,"In particular, unlike an App module, a Library project does not produce an APK of its own. Therefore, Testify must be configured to use the Library's generated instrumentation test runner APK as both the application under test and the test runner. These values are specified via the ",(0,i.kt)("inlineCode",{parentName:"p"},"applicationPackageId")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"testPackageId")," Testify Extension values."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"applicationPackageId")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"testPackageId")," for a Library project will be the same value. You must specify this in your ",(0,i.kt)("inlineCode",{parentName:"p"},"build.gradle")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},'testify {\n    applicationPackageId "dev.testify.samples.flix.library.test"\n    testPackageId "dev.testify.samples.flix.library.test"\n}\n')),(0,i.kt)("p",null,"To find out what value to use for ",(0,i.kt)("inlineCode",{parentName:"p"},"applicationPackageId")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"testPackageId"),", you can check the ",(0,i.kt)("a",{parentName:"p",href:"https://source.android.com/docs/core/tests/development/instrumentation"},(0,i.kt)("em",{parentName:"a"},"instrumentation"),(0,i.kt)(a.Z,{mdxType:"OpenNew"}))," name for your library by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"pm list instrumentation")," command on your emulator."),(0,i.kt)("p",null,"For example, to check the instrumentation name of the ",(0,i.kt)("em",{parentName:"p"},"Flix Library")," sample project:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell-session"},"$ ./gradlew FlixLibrary:installDebugAndroidTest\n    Installing APK 'FlixLibrary-debug-androidTest.apk' on 'Testify(AVD) - 10' for :FlixLibrary:debug-androidTest\n    BUILD SUCCESSFUL in 1s\n    53 actionable tasks: 1 executed, 52 up-to-date\n\n$ adb shell pm list instrumentation\n    instrumentation:dev.testify.samples.flix.library.test/androidx.test.runner.AndroidJUnitRunner (target=dev.testify.samples.flix.library.test)\n")),(0,i.kt)("h3",{id:"testify-configuration-values"},"Testify Configuration Values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"testPackageId")," : The ",(0,i.kt)("inlineCode",{parentName:"li"},"instrumentation")," package reported by ",(0,i.kt)("inlineCode",{parentName:"li"},"pm list instrumentation"),".",(0,i.kt)("br",null),"\nex. ",(0,i.kt)("inlineCode",{parentName:"li"},"dev.testify.samples.flix.library.test")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"applicationPackageId")," : The ",(0,i.kt)("inlineCode",{parentName:"li"},"target")," package reported by ",(0,i.kt)("inlineCode",{parentName:"li"},"pm list instrumentation"),".",(0,i.kt)("br",null),"\nex. ",(0,i.kt)("inlineCode",{parentName:"li"},"dev.testify.samples.flix.library.test"))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"sample"},"Sample"),(0,i.kt)("p",null,"Please see the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ndtp/android-testify/tree/main/Samples/Flix/FlixLibrary"},"Flix Library sample")," for an example of using Testify with a library project."),(0,i.kt)("h2",{id:"more-information"},"More Information"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://developer.android.com/studio/projects/android-library"},"Create an Android library ",(0,i.kt)(a.Z,{mdxType:"OpenNew"}))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://source.android.com/docs/core/tests/development/instrumentation"},"Instrumentation tests ",(0,i.kt)(a.Z,{mdxType:"OpenNew"})))),(0,i.kt)("hr",null))}m.isMDXComponent=!0}}]);